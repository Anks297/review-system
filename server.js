
const express = require('express');
const cors = require('cors');
const path = require('path');

const app = express();
const PORT = process.env.PORT || 3000;

app.use(cors());
app.use(express.json());
app.use((req, res, next) => {
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
    res.header("Access-Control-Allow-Headers", "Origin, Content-Type, Accept");
    next();
});

app.use(express.static(__dirname));

let reviews = [
  "Review number 1",
  "Review number 2",
  "Review number 3",
  "Review number 4",
  "Review number 5",
  "Review number 6",
  "Review number 7",
  "Review number 8",
  "Review number 9",
  "Review number 10",
  "Review number 11",
  "Review number 12",
  "Review number 13",
  "Review number 14",
  "Review number 15",
  "Review number 16",
  "Review number 17",
  "Review number 18",
  "Review number 19",
  "Review number 20",
  "Review number 21",
  "Review number 22",
  "Review number 23",
  "Review number 24",
  "Review number 25",
  "Review number 26",
  "Review number 27",
  "Review number 28",
  "Review number 29",
  "Review number 30",
  "Review number 31",
  "Review number 32",
  "Review number 33",
  "Review number 34",
  "Review number 35",
  "Review number 36",
  "Review number 37",
  "Review number 38",
  "Review number 39",
  "Review number 40",
  "Review number 41",
  "Review number 42",
  "Review number 43",
  "Review number 44",
  "Review number 45",
  "Review number 46",
  "Review number 47",
  "Review number 48",
  "Review number 49",
  "Review number 50",
  "Review number 51",
  "Review number 52",
  "Review number 53",
  "Review number 54",
  "Review number 55",
  "Review number 56",
  "Review number 57",
  "Review number 58",
  "Review number 59",
  "Review number 60",
  "Review number 61",
  "Review number 62",
  "Review number 63",
  "Review number 64",
  "Review number 65",
  "Review number 66",
  "Review number 67",
  "Review number 68",
  "Review number 69",
  "Review number 70",
  "Review number 71",
  "Review number 72",
  "Review number 73",
  "Review number 74",
  "Review number 75",
  "Review number 76",
  "Review number 77",
  "Review number 78",
  "Review number 79",
  "Review number 80",
  "Review number 81",
  "Review number 82",
  "Review number 83",
  "Review number 84",
  "Review number 85",
  "Review number 86",
  "Review number 87",
  "Review number 88",
  "Review number 89",
  "Review number 90",
  "Review number 91",
  "Review number 92",
  "Review number 93",
  "Review number 94",
  "Review number 95",
  "Review number 96",
  "Review number 97",
  "Review number 98",
  "Review number 99",
  "Review number 100",
  "Review number 101",
  "Review number 102",
  "Review number 103",
  "Review number 104",
  "Review number 105",
  "Review number 106",
  "Review number 107",
  "Review number 108",
  "Review number 109",
  "Review number 110",
  "Review number 111",
  "Review number 112",
  "Review number 113",
  "Review number 114",
  "Review number 115",
  "Review number 116",
  "Review number 117",
  "Review number 118",
  "Review number 119",
  "Review number 120",
  "Review number 121",
  "Review number 122",
  "Review number 123",
  "Review number 124",
  "Review number 125",
  "Review number 126",
  "Review number 127",
  "Review number 128",
  "Review number 129",
  "Review number 130",
  "Review number 131",
  "Review number 132",
  "Review number 133",
  "Review number 134",
  "Review number 135",
  "Review number 136",
  "Review number 137",
  "Review number 138",
  "Review number 139",
  "Review number 140",
  "Review number 141",
  "Review number 142",
  "Review number 143",
  "Review number 144",
  "Review number 145",
  "Review number 146",
  "Review number 147",
  "Review number 148",
  "Review number 149",
  "Review number 150",
  "Review number 151",
  "Review number 152",
  "Review number 153",
  "Review number 154",
  "Review number 155",
  "Review number 156",
  "Review number 157",
  "Review number 158",
  "Review number 159",
  "Review number 160",
  "Review number 161",
  "Review number 162",
  "Review number 163",
  "Review number 164",
  "Review number 165",
  "Review number 166",
  "Review number 167",
  "Review number 168",
  "Review number 169",
  "Review number 170",
  "Review number 171",
  "Review number 172",
  "Review number 173",
  "Review number 174",
  "Review number 175",
  "Review number 176",
  "Review number 177",
  "Review number 178",
  "Review number 179",
  "Review number 180",
  "Review number 181",
  "Review number 182",
  "Review number 183",
  "Review number 184",
  "Review number 185",
  "Review number 186",
  "Review number 187",
  "Review number 188",
  "Review number 189",
  "Review number 190",
  "Review number 191",
  "Review number 192",
  "Review number 193",
  "Review number 194",
  "Review number 195",
  "Review number 196",
  "Review number 197",
  "Review number 198",
  "Review number 199",
  "Review number 200",
  "Review number 201",
  "Review number 202",
  "Review number 203",
  "Review number 204",
  "Review number 205",
  "Review number 206",
  "Review number 207",
  "Review number 208",
  "Review number 209",
  "Review number 210",
  "Review number 211",
  "Review number 212",
  "Review number 213",
  "Review number 214",
  "Review number 215",
  "Review number 216",
  "Review number 217",
  "Review number 218",
  "Review number 219",
  "Review number 220",
  "Review number 221",
  "Review number 222",
  "Review number 223",
  "Review number 224",
  "Review number 225",
  "Review number 226",
  "Review number 227",
  "Review number 228",
  "Review number 229",
  "Review number 230",
  "Review number 231",
  "Review number 232",
  "Review number 233",
  "Review number 234",
  "Review number 235",
  "Review number 236",
  "Review number 237",
  "Review number 238",
  "Review number 239",
  "Review number 240",
  "Review number 241",
  "Review number 242",
  "Review number 243",
  "Review number 244",
  "Review number 245",
  "Review number 246",
  "Review number 247",
  "Review number 248",
  "Review number 249",
  "Review number 250",
  "Review number 251",
  "Review number 252",
  "Review number 253",
  "Review number 254",
  "Review number 255",
  "Review number 256",
  "Review number 257",
  "Review number 258",
  "Review number 259",
  "Review number 260",
  "Review number 261",
  "Review number 262",
  "Review number 263",
  "Review number 264",
  "Review number 265",
  "Review number 266",
  "Review number 267",
  "Review number 268",
  "Review number 269",
  "Review number 270",
  "Review number 271",
  "Review number 272",
  "Review number 273",
  "Review number 274",
  "Review number 275",
  "Review number 276",
  "Review number 277",
  "Review number 278",
  "Review number 279",
  "Review number 280",
  "Review number 281",
  "Review number 282",
  "Review number 283",
  "Review number 284",
  "Review number 285",
  "Review number 286",
  "Review number 287",
  "Review number 288",
  "Review number 289",
  "Review number 290",
  "Review number 291",
  "Review number 292",
  "Review number 293",
  "Review number 294",
  "Review number 295",
  "Review number 296",
  "Review number 297",
  "Review number 298",
  "Review number 299",
  "Review number 300",
  "Review number 301",
  "Review number 302",
  "Review number 303",
  "Review number 304",
  "Review number 305",
  "Review number 306",
  "Review number 307",
  "Review number 308",
  "Review number 309",
  "Review number 310",
  "Review number 311",
  "Review number 312",
  "Review number 313",
  "Review number 314",
  "Review number 315",
  "Review number 316",
  "Review number 317",
  "Review number 318",
  "Review number 319",
  "Review number 320",
  "Review number 321",
  "Review number 322",
  "Review number 323",
  "Review number 324",
  "Review number 325",
  "Review number 326",
  "Review number 327",
  "Review number 328",
  "Review number 329",
  "Review number 330",
  "Review number 331",
  "Review number 332",
  "Review number 333",
  "Review number 334",
  "Review number 335",
  "Review number 336",
  "Review number 337",
  "Review number 338",
  "Review number 339",
  "Review number 340",
  "Review number 341",
  "Review number 342",
  "Review number 343",
  "Review number 344",
  "Review number 345",
  "Review number 346",
  "Review number 347",
  "Review number 348",
  "Review number 349",
  "Review number 350"
];

app.get('/get-review', (req, res) => {
    if (reviews.length === 0) {
        return res.json({ review: "No reviews left!" });
    }
    const randomIndex = Math.floor(Math.random() * reviews.length);
    const selectedReview = reviews[randomIndex];
    reviews.splice(randomIndex, 1);
    res.json({ review: selectedReview });
});

app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'index.html'));
});

app.listen(PORT, () => {
    console.log(`Server running on http://localhost:${PORT}`);
});
